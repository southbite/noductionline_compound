require(grDevices)
library(ggplot2)

readData = function (file) {
    read.table(file, header = F, sep = " ", col.names = c("tick", "duration", "heap", "total"))
}

png(
  '/tmp/graph.png'
)

ggplot() +
ggtitle("Benchmarking RailwayJS controller performance") + 
ylab("Duration of 100K calls (ms)") +
xlab("Batch number") +
theme(legend.title=element_blank()) +
geom_line(aes(tick, duration, colour="Controller"), readData("/tmp/data1")) +
geom_line(aes(tick, duration, colour="Pure JS fun"), readData("/tmp/data2"))

dev.off()

